<app-popup-header [title]="'Seleccionar Empresas'" [icon]="'building'" [isBootstrapIcon]="true" (close)="cerrar()"></app-popup-header>

<div mat-dialog-content class="pt-3 pb-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <button type="button" class="btn btn-sm btn-outline-primary" (click)="seleccionarTodas()">
      <i class="bi bi-check-all me-1"></i>
      Seleccionar todas
    </button>
    <span class="text-muted small">
      {{ getSelectedCount() }} de {{ empresas.length }} seleccionadas
    </span>
  </div>

  <div class="empresa-list">
    <div class="form-check empresa-item" *ngFor="let empresa of empresas">
      <input 
        class="form-check-input" 
        type="checkbox" 
        [id]="'empresa-' + empresa.id"
        [checked]="empresa.selected"
        (change)="toggleEmpresa(empresa)">
      <label class="form-check-label w-100" [for]="'empresa-' + empresa.id">
        {{ empresa.name }}
      </label>
    </div>
  </div>

  <div *ngIf="!algunaSeleccionada()" class="alert alert-warning mt-3 mb-0">
    <i class="bi bi-exclamation-triangle me-2"></i>
    Debe seleccionar al menos una empresa
  </div>
</div>

<mat-dialog-actions class="d-flex justify-content-end gap-2">
  <button 
    type="button" 
    class="btn btn-primary" 
    (click)="aplicar()"
    [disabled]="!algunaSeleccionada()">
    Aplicar
  </button>
  <button type="button" class="btn btn-cancel" (click)="cerrar()">
    Cancelar
  </button>
</mat-dialog-actions>
